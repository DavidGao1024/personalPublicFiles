# CLAUDE.md

这个文件为 Claude Code (claude.ai/code) 在处理此代码库时提供指导。

## 项目概述

这是一个客户端 AES 解密的单页面 Web 应用。整个应用包含在 `index.html` 一个文件中，内嵌了 CSS 和 JavaScript。它提供了一种安全的方式在浏览器中解密 AES 加密的数据，不会将密钥传输到任何服务器。

## 架构说明

**单文件应用**：所有功能都包含在 `index.html` 中：
- 第 8-366 行：CSS 样式，包含响应式设计
- 第 440-810 行：JavaScript 实现，包括：
  - 使用 CryptoJS 库（从 CDN 加载）进行 AES ECB 模式解密
  - JSON 解析和语法高亮
  - 带键盘导航的搜索功能
  - 错误密钥和格式错误数据的错误处理

**核心组件**：
- **解密引擎**（第 477-491 行）：使用 CryptoJS 的 AES ECB 模式和 PKCS7 填充
- **JSON 格式化器**（第 543-579 行）：自定义的 JSON 输出语法高亮器
- **搜索系统**（第 612-766 行）：支持实时搜索、高亮显示和导航
- **UI 状态管理**：未使用框架，直接进行 DOM 操作

## 开发命令

```bash
# 本地打开应用
start index.html  # Windows
open index.html   # macOS
xdg-open index.html  # Linux

# 使用本地 Web 服务器运行（如果已安装 Python）
python -m http.server 8000
# 然后访问 http://localhost:8000

# 无需构建过程 - 对 index.html 的修改会立即生效
```

## 测试与调试

由于这是一个没有测试套件的客户端应用：
1. 打开浏览器开发者工具控制台（F12）检查 JavaScript 错误
2. 使用已知的加密数据/密钥对测试解密功能
3. 使用各种数据结构验证 JSON 解析
4. 使用不同模式测试搜索功能
5. 在不同屏幕尺寸下检查响应式设计

## 重要实现细节

**加密规格**：
- 算法：AES ECB 模式
- 密钥长度：16 个字符（128 位）
- 填充方式：PKCS7
- 输入格式：Base64 编码的密文
- 输出：JSON 数据

**安全考虑**：
- 密钥永不传输或存储
- 所有处理都在客户端进行
- 使用 ECB 模式（注意：在某些使用场景下不如 CBC 安全）

**外部依赖**：
- CryptoJS v4.2.0（从 cdn.bootcdn.net 加载）

## 常见修改

**更改加密模式**（例如从 ECB 改为 CBC）：
- 修改解密函数中的第 483-488 行
- 需要添加 IV（初始化向量）输入字段

**添加新功能**：
- 所有 JavaScript 代码从第 440 行开始
- CSS 自定义从第 8 行开始
- HTML 结构在第 369-438 行

**支持其他加密算法**：
- 更新 decrypt() 函数中的 CryptoJS 使用（第 477+ 行）
- 添加算法选择 UI 元素

## 应用特点

**用户界面**：
- 左侧面板：密钥输入和加密数据输入区
- 右侧面板：解密后的 JSON 显示区，带搜索功能
- 状态栏：显示当前状态和时间戳

**快捷键支持**：
- Ctrl+F：聚焦搜索框
- Enter：在搜索结果中导航到下一个
- 上/下箭头：在搜索结果间导航

**错误处理**：
- 密钥错误提示
- Base64 格式错误提示
- JSON 解析错误提示
- 详细的错误原因说明